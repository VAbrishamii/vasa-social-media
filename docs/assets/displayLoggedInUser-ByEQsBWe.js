function m(){const n=JSON.parse(localStorage.getItem("user"));if(n){const t=document.createElement("a");t.classList.add("profile-link"),t.href="#";const o=document.createElement("div");o.classList.add("profile");const l=document.createElement("img");l.classList.add("user-avatar"),n.avatar&&(l.src=n.avatar.url,l.alt=`${n.name}'s avatar`);const r=document.createElement("span");r.classList.add("user-name"),r.textContent=n.name,o.appendChild(l),o.appendChild(r),t.appendChild(o);const a=document.createElement("ul");a.classList.add("dropdown-menu"),[{name:"My Posts",link:`/profile/?user=${n.name}`},{name:"update",link:"/profile/update/"},{name:"Home",link:"/post/feed/"},{name:"Logout",link:"#"}].forEach(e=>{const i=document.createElement("li"),s=document.createElement("a");s.href=e.link,s.textContent=e.name,e.name==="Logout"&&s.addEventListener("click",()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("user"),window.location.href="/auth/login/"}),i.appendChild(s),a.appendChild(i)}),t.appendChild(a);const d=document.querySelector(".profile-container");d&&d.appendChild(t),t.addEventListener("click",e=>{e.preventDefault(),a.classList.toggle("show-menu")}),a.addEventListener("click",e=>{e.stopPropagation()})}else window.location.href="/auth/login/"}export{m as d};
